schema: '2.0'
stages:
  data_ingestion:
    cmd: python src/ingestion/data_ingestion.py
    deps:
    - path: src/ingestion/data_ingestion.py
      hash: md5
      md5: eb62539ded304790b45608f5139f4cc5
      size: 2865
    params:
      params.yaml:
        ingestion.month: 3
        ingestion.raw_data_path: mlops_data/raw.csv
        ingestion.year: 2025
    outs:
    - path: mlops_data/raw.csv
      hash: md5
      md5: 70f84a035ad186f8d9d50c26015b0d48
      size: 69964745
  feature_engineering:
    cmd: python src/features/build_features.py
    deps:
    - path: mlops_data/raw.csv
      hash: md5
      md5: 70f84a035ad186f8d9d50c26015b0d48
      size: 69964745
    - path: src/features/build_features.py
      hash: md5
      md5: ee7ebb52e82edd9c04a8a6258b357561
      size: 1636
    - path: src/features/build_features_transformer.py
      hash: md5
      md5: 6a8313aaa615cc76c77826a7aa340590
      size: 2875
    params:
      params.yaml:
        preprocessing.processed_path: mlops_data/processed/eta_features.parquet
    outs:
    - path: mlops_data/processed/eta_features.parquet
      hash: md5
      md5: 9d3deb299046f0db0554fdb93c1aefd2
      size: 16749055
  model_training:
    cmd: python src/model/model_selection.py
    deps:
    - path: mlops_data/processed/eta_features.parquet
      hash: md5
      md5: 9d3deb299046f0db0554fdb93c1aefd2
      size: 16749055
    - path: src/model/model_selection.py
      hash: md5
      md5: 3bdccfef7b6a87d8358500114c83cd42
      size: 5783
    params:
      params.yaml:
        training.target_col: ETA
    outs:
    - path: models/best_model.pkl
      hash: md5
      md5: 6ac17b19f21b903e2dd90df84b6254ad
      size: 1144876
  train_production:
    cmd: python src/model/train_best_model.py
    deps:
    - path: mlops_data/processed/eta_features.parquet
      hash: md5
      md5: 9d3deb299046f0db0554fdb93c1aefd2
      size: 16749055
    - path: models/best_model.pkl
      hash: md5
      md5: 6ac17b19f21b903e2dd90df84b6254ad
      size: 1144876
    - path: src/model/train_best_model.py
      hash: md5
      md5: b7dd84bd25a49931891c0b1cf059de40
      size: 2591
    outs:
    - path: models/production_model.pkl
      hash: md5
      md5: 839384303a3f0bfc06cf4d46f1d66510
      size: 1145107
  evaluate_and_promote:
    cmd: python src/model/promote_model.py
    deps:
    - path: mlruns/
      hash: md5
      md5: 3b0d13a7a423c24c41997918fd87d1b7.dir
      size: 16394951
      nfiles: 17
    - path: src/model/promote_model.py
      hash: md5
      md5: dfe53b70f99ce66c7cd52e4fbded3508
      size: 3194
